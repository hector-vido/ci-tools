presubmits:
  super/duper:
  - agent: kubernetes
    always_run: false
    branches:
    - ^main$
    - ^main-
    context: ci/prow/images
    decorate: true
    max_concurrency: 100
    name: pull-ci-super-duper-main-images
    optional: true
    rerun_command: /test images
    run_if_changed: changes
    skip_cloning: true
    skip_report: true
    spec:
      containers:
      - args:
        - --target=[images]
        command:
        - ci-operator
        env:
        - name: CONFIG_SPEC
          valueFrom:
            configMapKeyRef:
              key: super-duper-main.yaml
              name: ci-operator-main-configs
        image: ci-operator:latest
        name: ""
        resources:
          requests:
            cpu: 10m
      serviceAccountName: ci-operator
    trigger: '(?m)^/test (?:.*? )?images(?: .*?)?$'
  - agent: jenkins
    branches:
    - main
    name: pull-ci-super-duper-main-legacy
    always_run: true
    context: ci/openshift-jenkins/legacy
    labels:
      main: ci.openshift.redhat.com
    rerun_command: /test legacy
    trigger: ((?m)^/test( all| legacy),?(\s+|$))
  - agent: jenkins
    name: pull-ci-super-duper-oldschool
    always_run: true
    context: ci/openshift-jenkins/oldschool
    labels:
      main: ci.openshift.redhat.com
    rerun_command: /test oldschool
    trigger: ((?m)^/test( all| oldschool),?(\s+|$))
  - agent: kubernetes
    always_run: false
    branches:
    - ^main$
    - ^main-
    context: ci/prow/images
    decorate: true
    labels:
      ci.openshift.io/generator: prowgen
    max_concurrency: 100
    name: pull-ci-super-duper-main-should-be-removed
    optional: true
    rerun_command: /test images
    run_if_changed: changes
    skip_cloning: true
    skip_report: true
    spec:
      containers:
      - args:
          - --target=[images]
        command:
          - ci-operator
        env:
          - name: CONFIG_SPEC
            valueFrom:
              configMapKeyRef:
                key: super-duper-main.yaml
                name: ci-operator-main-configs
        image: ci-operator:latest
        name: ""
        resources:
          requests:
            cpu: 10m
      serviceAccountName: ci-operator
    trigger: '(?m)^/test (?:.*? )?images(?: .*?)?$'
  - agent: jenkins
    name: pull-ci-super-duper-skippy
    always_run: false
    context: ci/openshift-jenkins/skippy
    labels:
      main: ci.openshift.redhat.com
    rerun_command: /test skippy
    skip_if_only_changed: changes
    trigger: ((?m)^/test( all| skippy),?(\s+|$))
